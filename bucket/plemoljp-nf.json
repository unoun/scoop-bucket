{
    "version": "1.2.4",
    "description": "Japanese font based on IBM Plex with Nerd Fonts",
    "homepage": "https://github.com/yuru7/PlemolJP",
    "license": "OFL-1.1-RFN",
    "url": "https://github.com/yuru7/PlemolJP/releases/download/v1.2.4/PlemolJP_NF_v1.2.4.zip",
    "hash": "55cb3609dc7fc0afa15d8701451dcb0c2e687d64a955e687d874647248d4029f",
    "depends": "sudo",
    "installer": {
        "script": [
            "$fontsPath = \"$env:LOCALAPPDATA\\Microsoft\\Windows\\Fonts\"",
            "$regPath = \"HKCU:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Fonts\"",
            "New-Item $fontsPath -ItemType Directory -ErrorAction SilentlyContinue | Out-Null",
            "Get-ChildItem $dir -Filter \"*.ttf\" -Depth 2 | ForEach-Object {",
            "    $name = ($_.Name -replace '(.*JP(35)?)(.*)(NF)-(.*[dtmnr])?(Italic)?\\.ttf', '$1 $3 $4 $5 $6 (TrueType)' -replace '  ', ' ')",
            "    New-ItemProperty -Path $regPath -Name $name -Value \"$fontsPath\\$($_.Name)\" -Force | Out-Null",
            "    Copy-Item $_.FullName -Destination $fontsPath",
            "}"
        ]
    },
    "uninstaller": {
        "script": [
            "if (!(is_admin)) { error \"Use sudo\"; exit 1 }",
            "$fontsPath = \"$env:LOCALAPPDATA\\Microsoft\\Windows\\Fonts\"",
            "$regPath = \"HKCU:\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Fonts\"",
            "Get-ChildItem $dir -Filter \"*.ttf\" -Depth 2 | ForEach-Object {",
            "    $name = ($_.Name -replace '(.*JP(35)?)(.*)(NF)-(.*[dtmnr])?(Italic)?\\.ttf', '$1 $3 $4 $5 $6 (TrueType)' -replace '  ', ' ')",
            "    Remove-ItemProperty -Path $regPath -Name $name -Force -ErrorAction SilentlyContinue",
            "}",
            "if ((Get-Service 'FontCache').Status -eq 'Running') {",
            "    Write-Host \"Restart FontCache service\"",
            "    Restart-Service FontCache",
            "}",
            "Get-ChildItem $dir -Filter \"*.ttf\" -Depth 2 | ForEach-Object {",
            "    Remove-Item \"$fontsPath\\$($_.Name)\" -Force -ErrorAction SilentlyContinue",
            "}"
        ]
    }

}